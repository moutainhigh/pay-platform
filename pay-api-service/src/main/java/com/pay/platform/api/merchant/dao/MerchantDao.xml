<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.pay.platform.api.merchant.dao.MerchantDao">

    <select id="queryMerchantByIMerchantNo" parameterType="java.lang.String" resultType="MerchantModel">
        select *
        from tb_merchant where merchant_no = #{merchantNo}
    </select>

    <select id="queryMerchantList" resultType="MerchantModel">
        select * from tb_merchant
    </select>

    <update id="addAccountAmount">
        update tb_merchant set account_amount = (account_amount + abs(#{amount}))
        where id = #{merchantId}
    </update>

    <insert id="addAccountAmountBillLog">
        insert into tb_merchant_account_amount_log (id , merchant_id ,	source_order_no,type,amount,create_time )
        values( uuid() , #{merchantId} , #{sourceOrderNo} , #{type} , #{amount} , now())
    </insert>

</mapper>